# Task definition

# Overview:

---

# Instructions:

## Creating a task definition:

1. In the AWS Management Console:
    1. Type "task definition" in the search bar.
    2. Select "task definitions".
    3. Click "create new task definition".

![Task%20definition%203f586284770d4d1692b693edd79f0546/Untitled.png](/ECS%20task%20definition/task%20definition/task%20def-00.png)

1. Naming the task definition
    
    ![Task%20definition%203f586284770d4d1692b693edd79f0546/Untitled%201.png](/ECS%20task%20definition/task%20definition/task%20def-07.png)
    
2. Specifying the container configuration

![Task%20definition%203f586284770d4d1692b693edd79f0546/Untitled%202.png](/ECS%20task%20definition/task%20definition/task%20def-01.png)

1Ô∏è‚É£ Specifying the container details (name & WordPress container image URI )

üí°For this project: we specified that the image would be pulled from the Elastic Container Register (ECR)

Or we can just pull it from the Docker Hub by entering the image URI: [docker.io/wordpress:latest](http://docker.io/wordpress:latest)

1. Configuring the environment variables

üí°For this project: these environment variables play a crucial role in providing configuration and runtime information to the application. They provide a way to pass information to the WordPress application without hardcoding it into the codebase.

![Task%20definition%203f586284770d4d1692b693edd79f0546/Untitled%203.png](/ECS%20task%20definition/task%20definition/task%20def-02.png)

1Ô∏è‚É£ Specifying the WordPress database name

2Ô∏è‚É£ Specifying the WordPress database username

3Ô∏è‚É£ Specifying the WordPress database user password

4Ô∏è‚É£ Specifying the WordPress database host (the database endpoint)

1. Specifying the application environment

![Task%20definition%203f586284770d4d1692b693edd79f0546/Untitled%204.png](/ECS%20task%20definition/task%20definition/task%20def-03.png)

1Ô∏è‚É£ Selecting the launch type

üí°For this project: AWS Fargate

2Ô∏è‚É£ Defining which OS with which the container should be compatible

3Ô∏è‚É£ Defining the task size (in terms of CPU and Memory)

4Ô∏è‚É£ Defining the container size (optional)

‚ö†Ô∏è The task is the set of resources allocated for all the containers of the task. In our case, we only have one container per task.

1. Specifying the task roles

![Task%20definition%203f586284770d4d1692b693edd79f0546/Untitled%205.png](/ECS%20task%20definition/task%20definition/task%20def-04.png)

1Ô∏è‚É£ The task role is the role we grant to the container to be able to make API requests to AWS services.

2Ô∏è‚É£ The task role is the role we grant to the ECS service to be able to make API requests on behalf of the user (i.e. pull container images, upload logs to CloudWatch, etc.)

1. Storage configuration
    1. Here is the default storage offered to the task

![Task%20definition%203f586284770d4d1692b693edd79f0546/Untitled%206.png](/ECS%20task%20definition/task%20definition/task%20def-05.png)

b. Adding a storage volume to the tasks

![Task%20definition%203f586284770d4d1692b693edd79f0546/Untitled%207.png](/ECS%20task%20definition/task%20definition/task%20def-06.png)

1Ô∏è‚É£ Naming the storage volume

2Ô∏è‚É£ Selecting EFS as a volume type

3Ô∏è‚É£ Selecting the file system

4Ô∏è‚É£ Selecting an access point (in case we want)

5Ô∏è‚É£ Selecting which container will have this storage access

6Ô∏è‚É£ Selecting the source volume (that we just named)

7Ô∏è‚É£ Defining a path in the container in which the source volume will be mounted

8Ô∏è‚É£ Defining the read/write permissions

## Creating a task:

1. We go to our ECS cluster and type create

![Task%20definition%203f586284770d4d1692b693edd79f0546/task-00.png](/ECS%20task%20definition/task%20creation/task-00.png)

1. Task deployment configuration

![Task%20definition%203f586284770d4d1692b693edd79f0546/task-01.png](/ECS%20task%20definition/task%20creation/task-01.png)

1Ô∏è‚É£ Choosing whether to deploy a task or a service (group of tasks)

2Ô∏è‚É£ Choosing the task family (which task definition) and a revision (version of the task definition)

3Ô∏è‚É£ Specifying the number of tasks to run

1. Networking configuration of the task

![Task%20definition%203f586284770d4d1692b693edd79f0546/task-02.png](/ECS%20task%20definition/task%20creation/task-02.png)

1Ô∏è‚É£ Choose where to deploy the task (it could be the same VPC as the one in which the ECS cluster resides)

2Ô∏è‚É£ Select in which subnets are tasks could be deployed (by default, we select all of them)

3Ô∏è‚É£ Select a security group for the ECS cluster

1. As we see, our task has been successfully created, and it is running

![Task%20definition%203f586284770d4d1692b693edd79f0546/task-03.png](/ECS%20task%20definition/task%20creation/task-03.png)